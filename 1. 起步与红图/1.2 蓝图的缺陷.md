# 1.2 红图

### 1.蓝图拆分视图函数的缺陷的缺陷

1.蓝图的作用并不是用来拆分视图函数的，而是用来拆分模块的
2.使用蓝图，统一个业务模型的试图函数的前缀都一样，代码重复啰嗦

### 2.打开思维，创建自己的redprint-红图

为了解决上面的两个问题，我们可以模仿蓝图，构建一个自定义的对象-红图，红图的定位是用来拆分视图，也就是视图函数层

![image.png](https://upload-images.jianshu.io/upload_images/7220971-26c3213bb5c70767.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

我们采用自顶向下的编程思想，先编写redprint在试图函数中的使用代码，再编写redprint具体的实现

#### 2.1 视图函数向红图的注册

app/api/v1/book.py

```python
from app.libs.redprint import RedPrint

__author__ = "gaowenfeng"

api = RedPrint('book')


@api.route('/v1/book/get')
def get_book():
    return 'i am book'
```

app/api/v1/user.py
```
from app.libs.redprint import RedPrint

__author__ = "gaowenfeng"

api = RedPrint('user')


@api.route('/v1/user/get')
def get_user():
    return 'i am gwf'
```

#### 2.2 红图向蓝图的注册

app/api/\_\_init__.py
```
from flask import Blueprint
from app.api.v1 import book, user

__author__ = "gaowenfeng"


def create_blueprint_v1():
    bp_v1 = Blueprint('v1', __name__)
    
    # 假设api有register的方法，后面再实现
    book.api.register(bp_v1)
    user.api.register(bp_v1)
    return bp_v1
```


